var popover=function(){var t=function(){var t="object"==typeof arguments[0]?arguments[0]:{name:arguments[0]};this.construct=function(t){var i=new e(t);return i.init(),i.setOptions(t),i};var e=function(t){var e=this;this.options={showMethod:"default",hideMethod:"default",contentAlign:"center",windowAlign:"center",closeButton:!0,closeColor:"black",closeText:"Close",confirmButton:!1,cancelButton:!1,confirmText:"OK",cancelText:"Cancel",cssPath:"style/",onConfirm:null,onCancel:null,onShow:null,onHide:null,background:!0,border:!0,blackener:!1,blackenerColor:"black",autoSize:!1,width:400,height:300,blackenerCloses:!0},this.defaults={},this.init=function(){this.create()},this.setup=function(t){this.id="lightbox"+i(6),this.options=shallowMerge(this.options,t)},this.create=function(){var t=this.getLightboxTemplate().replace("[%-id-%]",this.id),e=this;jQuery("body").append(t);var i=[{target:"#"+e.id+" .popover-lightbox-close",callback:e.actions.BTCloseLightbox,evnt:"click",controlName:"BTCloseLightbox"+this.id},{target:"#"+e.id+" .popover-lightbox-blackener",callback:e.actions.BTCloseLightboxBlackener,evnt:"click",controlName:"BTCloseLightboxBlackener"+this.id}];i.forEach(function(t){jQuery(t.target).on(t.evnt,t.callback),document.querySelector(t.target).addEventListener("touchend",function(t){t.preventDefault(),t.target.click()})}),setTimeout(function(){jQuery(".popover-lightbox").removeAttr("style")},500)},this.show=function(){var t=this;arguments[0]&&"object"==typeof arguments[0]&&this.setOptions(arguments[0]),arguments[0]&&arguments[0].html&&this.html(arguments[0].html),this.update(),this.options.onShow&&this.options.onShow();var e=document.querySelector("#"+this.id),i=e.getAttribute("data-state")||"";e.setAttribute("data-state",i=i.replace("-animatingout","")),e.setAttribute("data-state",i+"-animatingin"),jQuery("#"+this.id).attr("data-transition",this.options.showMethod||""),t.options.autoSize===!0?t.autoSizeLB(!0):t.autoSizeLB(!1)},this.hide=function(){this.options.onHide&&this.options.onHide();var t=document.querySelector("#"+this.id),e=t.getAttribute("data-state")||"";t.setAttribute("data-state",e=e.replace("-animatingin","")),t.setAttribute("data-state",e+"-animatingout"),jQuery("#"+this.id).attr("data-transition",this.options.hideMethod||"")},this.toggle=function(){jQuery("#"+this.id).toggleClass("on")},this.html=function(t){jQuery("#"+this.id).children(".popover-lightbox-content").css({width:this.options.width,height:this.options.height}),jQuery("#"+this.id).find(".popover-lightbox-content .content").html(t)},this.setOptions=function(){var t=arguments[0]||{};this.options=shallowMerge(this.options,t),this.update()},this.getOptions=function(){return this.options},this.saveDefault=function(){var t=arguments[0].name||arguments[0]||"default";this.defaults[t]=JSON.parse(JSON.stringify(this.options))},this.useDefault=this.restoreDefault=function(){var t=arguments[0].name||arguments[0]||"default";this.setOptions(this.defaults[t])},this.getLightboxTemplate=function(){var t="";return t+='<div class="popover-lightbox" id="[%-id-%]" data-name="%-name-%" style="display:none;">',t+='	<div class="popover-lightbox-content background border">',t+='		<div class="feedbackButtons"><div class="popover-lightbox-cancel BTLightbox" data-display="false">Cancel ✘</div><div class="popover-lightbox-confirm BTLightbox" data-display="false">Confirm ✔</div></div>',t+='		<div class="popover-lightbox-close BTLightbox" data-display="true">Close</div>',t+='		<div class="content"></div>',t+="	</div>",t+='	<div class="popover-lightbox-blackener off"></div>',t+="</div>",t=t.replace("%-name-%",this.options.name)},this.update=function(){for(prop in this.options){var t=this,e=this.options[prop],i=jQuery("#"+this.id),o=jQuery("#"+this.id).children(".popover-lightbox-content");switch(prop){case"closeButton":o.children(".popover-lightbox-close").attr("data-display",e);break;case"confirmButton":o.find(".popover-lightbox-confirm").attr("data-display",e);break;case"cancelButton":o.find(".popover-lightbox-cancel").attr("data-display",e);break;case"closeText":o.children(".popover-lightbox-close").text(e);break;case"closeColor":o.children(".popover-lightbox-close").css("background-color",e);break;case"confirmText":o.find(".popover-lightbox-confirm").text(e);break;case"cancelText":o.find(".popover-lightbox-cancel").text(e);break;case"width":this.autoSize||o.css("width",e);break;case"height":this.autoSize||o.css("height",e);break;case"autoSize":e?this.autoSizeLB(!0):this.autoSizeLB(!1);break;case"contentAlign":i.attr("data-contentAlign",e);break;case"windowAlign":i.attr("data-align",e);break;case"background":o.css("background",e);break;case"border":o.removeClass("border"),e&&o.addClass("border");break;case"blackener":e?i.children(".popover-lightbox-blackener").removeClass("off").addClass("on"):i.children(".popover-lightbox-blackener").removeClass("on").addClass("off");break;case"blackenerColor":i.children(".popover-lightbox-blackener").attr("data-color",e);break;case"onConfirm":var n=e;i.find(".popover-lightbox-confirm").unbind().on("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),n&&n(t)}),i.find(".popover-lightbox-confirm").on("touchend",function(t){t.preventDefault(),t.target.click()});break;case"onCancel":var a=e;i.find(".popover-lightbox-cancel").unbind().on("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),a&&a(t)}),i.find(".popover-lightbox-cancel").on("touchend",function(t){t.preventDefault(),t.target.click()})}}},this.autoSizeLB=function(t){var e=jQuery("#"+this.id).children(".popover-lightbox-content"),i=e.children(".content")[0],o={width:i.scrollWidth,height:i.scrollHeight};t?(e.css("width",o.width),e.css("height",o.height),e.children(".content").addClass("autoSize")):(e.children(".content").removeClass("autoSize"),e.css({height:this.options.height,width:this.options.width}))},this.destroy=function(){jQuery("#"+this.id).remove()},this.actions={BTCloseLightbox:function(t){t.preventDefault(),t.stopImmediatePropagation();jQuery(this).closest(".popover-lightbox").attr("data-name");e.hide()},BTCloseLightboxBlackener:function(t){var i=(this.parentNode.getAttribute("data-name"),e.getOptions());if(i.blackenerCloses){t.preventDefault(),t.stopImmediatePropagation();{jQuery(this).closest(".popover-lightbox").attr("data-name")}e.hide()}}},this.setup(t)};return this.construct(t)},e=function(){var t="object"==typeof arguments[0]?arguments[0]:{name:arguments[0]};this.construct=function(t){var i=new e(t);scaf("plugin:register",i,t.name),scaf(t.name+":setOptions",t)};var e=function(t){this.options=shallowMerge({arrangement:"circle",animates:"sequential",color:"white"},t),this.init=function(){this.create()},this.setup=function(t){this.id=i(6),this.options=shallowMerge(t,this.options)},this.create=function(){var t=this.getLoadingSpinnerTemplate().replace("[%-id-%]",this.id).replace("%-name-%",this.options.name);jQuery("body").append(t)},this.show=function(){jQuery("#"+this.id).addClass("on")},this.hide=function(){jQuery("#"+this.id).removeClass("on")},this.getLoadingSpinnerTemplate=function(){var t="";return t+='<div class="scaf-loadingSpinner" data-arrangement="%-arrangement-%" data-animates="%-animates-%" data-color="%-color-%" id="[%-id-%]" data-name="%-name-%">',t+='	<div class="scaf-loadingSpinner-content"><div class="scaf-loadingImage"></div><div class="scaf-loadingBubble"></div><div class="scaf-loadingBubble"></div><div class="scaf-loadingBubble"></div><div class="scaf-loadingBubble"></div><div class="scaf-loadingBubble"></div></div>',t+='	<div class="scaf-loadingSpinner-blackener"></div>',t+="</div>"},this.setOptions=function(){var t=arguments[0]||{};this.options=shallowMerge(this.options,t),this.update()},this.update=function(){for(prop in this.options){{var t=this.options[prop],e=jQuery("#"+this.id);jQuery("#"+this.id).find(".scaf-loadingBubble")}switch(prop){case"arrangement":e.attr("data-arrangement",t);break;case"animates":e.attr("data-animates",t);break;case"color":e.attr("data-color",t)}}},this.destroy=function(){jQuery("#"+this.id).remove(),eLog("loadingSpinner:destroy","Should be deregistering loadingSpinners here")},this.setup(t)};this.construct(t)},i=function(){var t={letters:"abcdefghijklmnopqrstuvwxyz",numbers:"0123456789",symbols:"`~!@#$%^&*()_-+={[}]:;<,>.?/"},e=arguments[0]||6,i="";i+=0==arguments[1]?"":t.numbers,i+=arguments[2]?t.letters:"",i+=arguments[3]?t.symbols:"";for(var o="",n=0;e>n;n++)o+=i[Math.floor(Math.random()*i.length)];return o};return shallowMerge=function(t,e){for(property in e)t[property]=e[property];return t},{lightbox:t,loadingSpinner:e}}();